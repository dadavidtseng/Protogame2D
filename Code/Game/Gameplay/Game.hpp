//----------------------------------------------------------------------------------------------------
// Game.hpp
//----------------------------------------------------------------------------------------------------

//----------------------------------------------------------------------------------------------------
#pragma once
//----------------------------------------------------------------------------------------------------
#include "Engine/Core/EventSystem.hpp"

//-Forward-Declaration--------------------------------------------------------------------------------
class Camera;
class Clock;

//----------------------------------------------------------------------------------------------------
enum class eGameState : int8_t
{
    ATTRACT,
    GAME
};

//----------------------------------------------------------------------------------------------------
class Game
{
public:
    //------------------------------------------------------------------------------------------------
    // Construct / Destruct
    //------------------------------------------------------------------------------------------------
    Game();
    ~Game();

    //------------------------------------------------------------------------------------------------
    // Life cycle
    //------------------------------------------------------------------------------------------------
    void Update();
    void Render() const;

    //------------------------------------------------------------------------------------------------
    // Game state
    //------------------------------------------------------------------------------------------------
    eGameState GetGameState() const;
    void       SetGameState(eGameState newState);

private:
    //------------------------------------------------------------------------------------------------
    // Game state
    //------------------------------------------------------------------------------------------------
    static bool OnGameStateChanged(EventArgs& args);

    //------------------------------------------------------------------------------------------------
    // Update
    //------------------------------------------------------------------------------------------------
    void UpdateGame();
    void UpdateTime() const;
    void UpdateWindow() const;

    //------------------------------------------------------------------------------------------------
    // Render
    //------------------------------------------------------------------------------------------------
    void RenderAttract() const;
    void RenderGame() const;

    eGameState m_gameState    = eGameState::ATTRACT;
    Camera*    m_screenCamera = nullptr;
    Clock*     m_gameClock    = nullptr;
};
